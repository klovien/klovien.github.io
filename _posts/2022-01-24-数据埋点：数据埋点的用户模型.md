---
layout:     post
title:      数据埋点：数据埋点的用户模型
subtitle:   
date:       2022-01-24
author:     dex0423
header-img: img/post-bg-os-metro.jpg
catalog: true
tags:
    - 数据埋点
---

#### 事件模型

- 一个事件的触发，有4个因素：触发者、触发位置、触发的事件、触发的时间。

  ![]({{site.baseurl}}/img-post/数据埋点-6.png)


#### 用户模型

- 每个用户都需要一个唯一标识。
- 选择一个合适的用户标识，对于用户行为分析的准确性有很大的影响。
- 这里说的唯一标识、是发生事件行为用户id在数据中台的标记，不是业务中的登录id。

#### 小程序用户

- 如果是小程序用户，可直接使用用户的 openid，需要上报用户 openid 和 unionid。
- 如果同一个微信开放平台账号下，有多个小程序/公众号，就可以通过 unionid 来打通用户体系。

#### H5用户

- 如果是 h5 用户，sdk 会创建一个 uuid 来唯一标记用户；
- uuid 根据用户的浏览器类型、屏幕宽高、分辨率等特性生成。

#### APP用户

- 优先使用设备id来唯一标记用户；
- 但如果取不到设备id，则使用一个 sdk 创建一个随机的 uuid 来标记。

#### 游客

- 如果是游客，并且游客后面登录了系统，该如何把游客和已登录状态的用户id的行为数据关联起来？
- 如果用户在未登录状态下触发了事件，那么 sdk 会创建一个 uuid 来唯一标记这个用户，uuid 不仅会随着行为数据上报，也会存在本地存储中；
- 如果以后用户注册登录了，就可以拿这个 uuid 去跟登录 id 去做关联，就可以把以前用户未登录时的行为事件数据和已登录状态的行为数据关联起来。